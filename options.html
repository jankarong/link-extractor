<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>外链信息填充助手 - 设置</title>
    <link rel="stylesheet" href="options.css">
</head>

<body>
    <div class="container">
        <div class="header">
            <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;">
                <button id="backToSidepanel" class="secondary-btn" style="display:none;">← 返回侧边栏</button>
                <div style="flex:1;">
                    <h1>外链信息填充助手</h1>
                    <p class="subtitle">设置和配置</p>
                </div>
            </div>
        </div>

        <div class="content">
            <div class="section">
                <h2>🤖 Gemini AI 配置</h2>
                <div class="form-group">
                    <label for="apiKey">Gemini API Key</label>
                    <div class="input-group">
                        <input type="password" id="apiKey" placeholder="输入你的Gemini API Key" class="api-key-input">
                        <button id="toggleApiKey" class="toggle-btn" title="显示/隐藏API Key">👁️</button>
                    </div>
                    <div class="help-text">
                        <p>获取API Key步骤：</p>
                        <ol>
                            <li>访问 <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI
                                    Studio</a></li>
                            <li>登录你的Google账户</li>
                            <li>点击"Create API Key"创建新的API密钥</li>
                            <li>复制生成的API Key并粘贴到上面的输入框</li>
                        </ol>
                        <p class="security-note">🔒 你的API Key只会保存在本地浏览器中，不会被上传到任何服务器</p>
                    </div>
                </div>

                <div class="form-group">
                    <div class="api-actions">
                        <button id="testApiKey" class="test-btn">测试API连接</button>
                        <button id="saveApiKey" class="primary-btn">保存API Key</button>
                    </div>
                    <div id="apiStatus" class="api-status hidden"></div>
                </div>
            </div>

            <div class="section">
                <h2 data-i18n="languageSettings">🌐 语言设置</h2>

                <div class="form-group">
                    <label for="interfaceLanguage" data-i18n="interfaceLanguage">界面语言</label>
                    <select id="interfaceLanguage" class="language-select">
                        <option value="zh" data-i18n="chinese">中文</option>
                        <option value="en" data-i18n="english">English</option>
                    </select>
                    <p class="help-text" data-i18n="interfaceLanguageNote">选择插件界面显示的语言</p>
                </div>

                <div class="form-group">
                    <label for="contentLanguage" data-i18n="contentLanguage">填充内容语言</label>
                    <select id="contentLanguage" class="language-select">
                        <option value="zh" data-i18n="chinese">中文</option>
                        <option value="en" data-i18n="english">English</option>
                    </select>
                    <p class="help-text" data-i18n="contentLanguageNote">选择AI分析和表单填充时使用的语言</p>
                </div>
            </div>

            <div class="section">
                <h2 data-i18n="autoFillSettings">⚙️ 自动填充设置</h2>

                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="enableAutoFill" checked>
                        <label for="enableAutoFill">启用自动填充功能</label>
                    </div>
                    <p class="help-text">关闭后将不会自动识别和填充表单字段</p>
                </div>

                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="enableLogoUpload" checked>
                        <label for="enableLogoUpload">启用Logo自动上传</label>
                    </div>
                    <p class="help-text">自动将Logo上传到支持的文件上传字段</p>
                </div>

                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="enableDebugMode">
                        <label for="enableDebugMode">启用调试模式</label>
                    </div>
                    <p class="help-text">在浏览器控制台显示详细的调试信息</p>
                </div>
            </div>

            <div class="section">
                <h2>💾 数据管理</h2>

                <div class="form-group">
                    <button id="exportData" class="secondary-btn">导出已保存的产品数据</button>
                    <p class="help-text">将所有保存的产品信息导出为JSON文件</p>
                </div>

                <div class="form-group">
                    <input type="file" id="importFile" accept=".json" class="hidden">
                    <button id="importData" class="secondary-btn">导入产品数据</button>
                    <p class="help-text">从JSON文件导入产品信息</p>
                </div>

                <div class="form-group">
                    <button id="clearData" class="danger-btn">清除所有数据</button>
                    <p class="help-text danger">⚠️ 这将删除所有保存的产品信息，此操作不可恢复</p>
                </div>
            </div>

            <div class="section">
                <h2>📊 使用统计</h2>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number" id="totalAnalyses">-</div>
                        <div class="stat-label">AI分析次数</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="totalFills">-</div>
                        <div class="stat-label">表单填充次数</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="savedProducts">-</div>
                        <div class="stat-label">保存的产品</div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>ℹ️ 关于</h2>
                <div class="about-info">
                    <p><strong>外链信息填充助手</strong> v1.0.0</p>
                    <p>使用AI自动分析网站信息并一键填充外链表单的Chrome插件</p>
                    <div class="links">
                        <a href="#" id="helpLink">使用帮助</a>
                        <a href="#" id="feedbackLink">反馈建议</a>
                        <a href="#" id="updateLink">检查更新</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <div class="actions">
                <button id="resetSettings" class="secondary-btn">重置所有设置</button>
                <p class="auto-save-note">💡 设置会自动保存，无需手动操作</p>
            </div>
        </div>

        <!-- 消息提示 -->
        <div id="message" class="message hidden"></div>

        <!-- 加载状态 -->
        <div id="loading" class="loading hidden">
            <div class="spinner"></div>
            <p>测试连接中...</p>
        </div>
    </div>

    <script src="i18n.js"></script>
    <script src="gemini-api.js"></script>
    <script src="options.js"></script>
</body>

</html>